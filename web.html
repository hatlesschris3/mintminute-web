<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MintMinute Web Ads</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f0f0f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
    }
    #ad-container {
      max-width: 600px;
      width: 100%;
      background: #fff;
      padding: 10px;
      box-shadow: 0 0 10px #aaa;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 340px;
      user-select: none;
      touch-action: pan-y;
      border-radius: 8px;
    }
    video, img {
      max-width: 100%;
      max-height: 320px;
      display: block;
      margin: auto;
      border-radius: 8px;
      outline: none;
    }
    #ad-description {
      text-align: center;
      margin-top: 12px;
      font-size: 1.2em;
      min-height: 2em;
      max-width: 600px;
      padding: 0 10px;
      color: #333;
      user-select: none;
    }
  </style>
</head>
<body>

  <div id="ad-container" tabindex="0" aria-live="polite" aria-label="Advertisement container">
    <!-- Ad content (video/image) will be injected here -->
  </div>
  <div id="ad-description"></div>

  <script>
    let ads = [];
    let currentIndex = 0;
    const container = document.getElementById('ad-container');
    const description = document.getElementById('ad-description');

    async function loadAds() {
      try {
        const response = await fetch('/ads.json');
        if (!response.ok) throw new Error('Failed to load ads');
        ads = await response.json();
        if (!Array.isArray(ads) || ads.length === 0) {
          description.textContent = 'No ads available.';
          return;
        }
        currentIndex = 0;
        showAd(currentIndex);
      } catch (err) {
        description.textContent = 'Error loading ads.';
        console.error(err);
      }
    }

    function showAd(index) {
      if (index < 0) {
        currentIndex = ads.length - 1;
      } else if (index >= ads.length) {
        currentIndex = 0;
      } else {
        currentIndex = index;
      }
      container.innerHTML = '';
      const ad = ads[currentIndex];

      if (ad.type === 'video') {
        const video = document.createElement('video');
        video.src = ad.url;
        video.autoplay = true;
        video.loop = true;
        video.muted = true;
        video.playsInline = true;
        video.controls = false;
        video.setAttribute('aria-label', ad.description || 'Advertisement video');
        container.appendChild(video);
      } else if (ad.type === 'image') {
        const img = document.createElement('img');
        img.src = ad.url;
        img.alt = ad.description || 'Advertisement image';
        container.appendChild(img);
      } else {
        container.textContent = 'Unsupported ad type.';
      }

      description.textContent = ad.description || '';
    }

    function nextAd() {
      showAd(currentIndex + 1);
    }

    function prevAd() {
      showAd(currentIndex - 1);
    }

    // Keyboard navigation
    window.addEventListener('keydown', (e) => {
      if (['ArrowRight', 'ArrowDown', 'Enter', ' '].includes(e.key)) {
        nextAd();
      } else if (['ArrowLeft', 'ArrowUp'].includes(e.key)) {
        prevAd();
      }
    });

    // Touch swipe navigation
    let touchStartX = 0;
    let touchStartY = 0;

    window.addEventListener('touchstart', (e) => {
      touchStartX = e.changedTouches[0].screenX;
      touchStartY = e.changedTouches[0].screenY;
    }, {passive: true});

    window.addEventListener('touchend', (e) => {
      const touchEndX = e.changedTouches[0].screenX;
      const touchEndY = e.changedTouches[0].screenY;

      const diffX = touchEndX - touchStartX;
      const diffY = touchEndY - touchStartY;

      const swipeThreshold = 40;

      if (Math.abs(diffX) > Math.abs(diffY)) {
        if (diffX > swipeThreshold) prevAd();       // swipe right -> prev
        else if (diffX < -swipeThreshold) nextAd(); // swipe left -> next
      } else {
        if (diffY > swipeThreshold) prevAd();       // swipe down -> prev
        else if (diffY < -swipeThreshold) nextAd(); // swipe up -> next
      }
    }, {passive: true});

    // Load ads once page
