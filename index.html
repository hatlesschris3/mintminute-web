<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>MintMinute - Watch Ads</title>
<style>
  body {
    font-family: Arial, sans-serif;
    max-width: 600px;
    margin: auto;
    padding: 20px;
    text-align: center;
    background: #f9f9f9;
  }
  h1 {
    color: #2a9d8f;
    margin-bottom: 0.2em;
  }
  video {
    width: 100%;
    max-height: 300px;
    border: 2px solid #2a9d8f;
    border-radius: 8px;
    outline: none;
  }
  p {
    margin-top: 10px;
    color: #555;
  }
</style>
</head>
<body>
  <h1>MintMinute</h1>
  <p>Your time, our money.</p>

  <video id="adVideo" autoplay muted loop playsinline tabindex="0" aria-label="Ad video player">
    <source src="ads/ad1.mp4" type="video/mp4" />
    Your browser does not support the video tag.
  </video>
  <p>Swipe or use arrow keys to change ads</p>

<script>
  const ads = [
    "ads/ad1.mp4",
    "ads/ad2.mp4",
    "ads/ad3.mp4"
  ];
  let currentIndex = 0;

  const video = document.getElementById('adVideo');

  function showAd(index) {
    if (index < 0) {
      currentIndex = ads.length - 1;
    } else if (index >= ads.length) {
      currentIndex = 0;
    } else {
      currentIndex = index;
    }
    // Change source properly for video element
    if (video.querySelector('source')) {
      video.querySelector('source').src = ads[currentIndex];
      video.load();
      video.play();
    } else {
      video.src = ads[currentIndex];
      video.play();
    }
  }

  // Keyboard navigation
  window.addEventListener('keydown', (e) => {
    if (['ArrowRight', 'ArrowDown', 'Enter'].includes(e.key)) {
      showAd(currentIndex + 1);
    }
    if (['ArrowLeft', 'ArrowUp'].includes(e.key)) {
      showAd(currentIndex - 1);
    }
  });

  // Swipe detection on the video element
  let touchStartX = 0;
  let touchStartY = 0;

  video.addEventListener('touchstart', e => {
    touchStartX = e.changedTouches[0].screenX;
    touchStartY = e.changedTouches[0].screenY;
  }, false);

  video.addEventListener('touchend', e => {
    const touchEndX = e.changedTouches[0].screenX;
    const touchEndY = e.changedTouches[0].screenY;

    const diffX = touchEndX - touchStartX;
    const diffY = touchEndY - touchStartY;

    // Thresholds for swipe detection
    if (Math.abs(diffX) > Math.abs(diffY)) {
      if (diffX > 40) {
        // Swipe right -> previous ad
        showAd(currentIndex - 1);
      } else if (diffX < -40) {
        // Swipe left -> next ad
        showAd(currentIndex + 1);
      }
    } else {
      if (diffY > 40) {
        // Swipe down -> next ad
        showAd(currentIndex + 1);
      } else if (diffY < -40) {
        // Swipe up -> previous ad
        showAd(currentIndex - 1);
      }
    }
  }, false);

  // Initialize first ad
  showAd(currentIndex);
</script>
</body>
</html>
