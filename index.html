<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MintMinute</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
      width: 100%;
      font-family: Arial, sans-serif;
      background-color: #000;
      overflow: hidden;
    }

    #adContainer {
      display: flex;
      flex-direction: column;
      align-items: center;
      height: 100vh;
      width: 100vw;
      position: relative;
    }

    video {
      width: 100%;
      height: 100%;
      aspect-ratio: 9 / 16;
      max-height: 100vh;
      object-fit: cover;
      background: black;
    }

    .overlay {
      position: absolute;
      bottom: 40px;
      left: 20px;
      right: 20px;
      color: #fff;
      text-shadow: 1px 1px 3px #000;
      font-size: 1.2em;
      z-index: 2;
      text-align: left;
    }

    .overlay a {
      color: #22ff88;
      text-decoration: underline;
      font-weight: bold;
      display: block;
      margin-top: 5px;
    }

    @media (min-width: 768px) {
      video {
        aspect-ratio: 16 / 9;
      }
    }
  </style>
</head>
<body>

  <div id="adContainer">
    <video id="videoPlayer" autoplay muted playsinline></video>
    <div class="overlay">
      <div id="adTitle">Loading...</div>
      <a id="adLink" href="#" target="_blank">Visit Product</a>
    </div>
  </div>

  <script>
    let ads = [];
    let currentIndex = 0;

    const player = document.getElementById("videoPlayer");
    const adTitle = document.getElementById("adTitle");
    const adLink = document.getElementById("adLink");
    const adContainer = document.getElementById("adContainer");

    function loadAd(index) {
      if (!ads.length) return;

      if (index < 0) index = ads.length - 1;
      else if (index >= ads.length) index = 0;
      currentIndex = index;

      const ad = ads[currentIndex];
      player.src = ad.video;
      adTitle.innerText = ad.title || "Untitled Ad";
      adLink.href = ad.link || "#";
      player.load();
      player.play();
    }

    fetch("ads.json")
      .then(res => res.json())
      .then(data => {
        ads = data;
        loadAd(currentIndex);
      });

    let startY = null;

    adContainer.addEventListener("touchstart", e => {
      startY = e.touches[0].clientY;
    }, { passive: true });

    adContainer.addEventListener("touchend", e => {
      const endY = e.changedTouches[0].clientY;
      handleSwipe(startY - endY);
    }, { passive: true });

    adContainer.addEventListener("mousedown", e => {
      startY = e.clientY;
    });

    adContainer.addEventListener("mouseup", e => {
      handleSwipe(startY - e.clientY);
    });

    function handleSwipe(deltaY) {
      if (Math.abs(deltaY) < 50) return;
      if (deltaY > 0) loadAd(currentIndex + 1);
      else loadAd(currentIndex - 1);
    }

    window.addEventListener("keydown", e => {
      if (e.key === "ArrowDown") loadAd(currentIndex + 1);
      else if (e.key === "ArrowUp") loadAd(currentIndex - 1);
      else if (e.key === "Enter") player.play();
    });
  </script>

</body>
</html>
